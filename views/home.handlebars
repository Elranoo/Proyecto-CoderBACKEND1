<h1>Lista de Productos</h1>
<div id="productsContainer">
  {{#each productos}}
    <div class="product-card">
      <h3>{{this.title}}</h3>
      <p>Precio: ${{this.price}}</p>
      <p>Categor√≠a: {{this.category}}</p>
      <a href="/products/{{this._id}}">Ver detalle</a>
      <button onclick="agregarAlCarrito('{{this._id}}')">Agregar al carrito</button>
    </div>
  {{/each}}
</div>

<div>
  {{#if hasPrev}}<a href="/products?page={{prevPage}}">Anterior</a>{{/if}}
  {{#if hasNext}}<a href="/products?page={{nextPage}}">Siguiente</a>{{/if}}
</div>

<script>
  const cartId = 'REEMPLAZAR_CON_TU_CARTID';

  async function agregarAlCarrito(productId) {
    try {
      const res = await fetch(`/api/carts/${cartId}/products/${productId}`, { method: 'POST' });
      const data = await res.json();
      if (res.ok) alert('Producto agregado al carrito');
      else alert(data.mensaje || 'Error');
    } catch (err) {
      alert('Error al agregar producto');
    }
  }
</script>




